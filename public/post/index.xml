<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Home</title>
    <link>/post/</link>
      <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><lastBuildDate>Thu, 09 Apr 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>img/map[gravatar:%!s(bool=false) shape:circle]</url>
      <title>Posts</title>
      <link>/post/</link>
    </image>
    
    <item>
      <title>Comparing np.tile vs np.repeat</title>
      <link>/post/tile_rep_diff/</link>
      <pubDate>Thu, 09 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/tile_rep_diff/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve recently been sharpening my fake data creation skills. Mainly because I&amp;rsquo;ve been in a couple situations where I&amp;rsquo;ve needed to develop things but real data was not available. &lt;code&gt;numpy&lt;/code&gt; is full of great functions to make this a streamlined process and I&amp;rsquo;m going to talk through the &lt;code&gt;.tile&lt;/code&gt; and &lt;code&gt;.repeat&lt;/code&gt; functions. Let&amp;rsquo;s get some context for the data I&amp;rsquo;m going to fakify.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We&amp;rsquo;ve got some data that tracks the different quantity options of different types of product.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For example, we can sell different types of chairs in quantities of 10 and 20.&lt;/p&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;name&lt;/th&gt;
      &lt;th&gt;size&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;silk&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;silk&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;expression&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;expression&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;Here is a really quick demonstration of the differences of these 2 functions. &lt;code&gt;.repeat&lt;/code&gt; will element-wise repeat each value, while &lt;code&gt;.tile&lt;/code&gt; will repeat the entire sequence that many times. Very helpful! Let&amp;rsquo;s extend this a tad to get something we can play around with. If we really think about this here, we need to repeat the names (unique vals) times, and we need to tile the values (unique names) times.&lt;/p&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;name&lt;/th&gt;
      &lt;th&gt;size&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;silk&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;silk&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;expression&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;expression&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;By adding &lt;code&gt;len(vals)&lt;/code&gt; and &lt;code&gt;len(names)&lt;/code&gt;, if I want to create another name or add a value to my list it won&amp;rsquo;t require me to change anything. I&amp;rsquo;ll wrap the df construction in function and prove it to you.&lt;/p&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;name&lt;/th&gt;
      &lt;th&gt;size&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;anthony&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;jim&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;name&lt;/th&gt;
      &lt;th&gt;size&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Creating code free jupyter notebook exports</title>
      <link>/post/creating-code-free-jupyter-notebook-exports/</link>
      <pubDate>Thu, 09 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/creating-code-free-jupyter-notebook-exports/</guid>
      <description>&lt;p&gt;This is going to be a really short post! If you&amp;rsquo;ve ever exported a jupyter notebook to html or pdf in order to share with someone that doesn&amp;rsquo;t want to see code, I&amp;rsquo;ve got the answer right here. To export a jupyter notebook without all the code use the following:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;jupyter nbconvert --to markdown --TemplateExporter.exclude_input=True index.ipynb
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Just replace &lt;code&gt;index.ipynb&lt;/code&gt; with the name of your jupyter notebook. More info &lt;a href=&#34;https://nbconvert.readthedocs.io/en/latest/config_options.html?highlight=TemplateExporter.exclude&#34;&gt;here&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Self Isolation Projects</title>
      <link>/post/self-isolation-projects/</link>
      <pubDate>Wed, 01 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/self-isolation-projects/</guid>
      <description>&lt;p&gt;With my internship ending soon and me having lots of time on my hands I&amp;rsquo;ve been kind of puttering around with some stuff. I recently found some data from the Office of Personnel management that is kind of a good data wrangling exercise. Also, I&amp;rsquo;m going to work on some operations research stuff. I&amp;rsquo;m planning on rewriting &lt;em&gt;Linear Programming and Extensions&lt;/em&gt; by George B. Danzig in LaTeX. Also, I&amp;rsquo;d like to use &lt;code&gt;scipy&lt;/code&gt; in order to solve some of the operations research problems he poses in this paper. Keep an eye on my github repo for more info.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>How Statistics Has Ruined My Ability To Have Opinions</title>
      <link>/post/how-statistics-has-ruined-my-ability-to-have-opinions/</link>
      <pubDate>Thu, 26 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/how-statistics-has-ruined-my-ability-to-have-opinions/</guid>
      <description>


&lt;p&gt;  For the past 4 years I have been studying statistics. Doing lots of practice problems, playing around with data, and reading textbooks. I’ve become a bit more familiar with the statistical way of thinking, how to analyze problems in terms of distributions rather than single numbers, and how to work with uncertainty. As much as I’ve loved this, it has had quite the unexpected consequence in my personal life.&lt;/p&gt;
&lt;div id=&#34;i-find-it-hard-to-have-an-opinion-about-anything.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;I find it hard to have an opinion about anything.&lt;/h3&gt;
&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;  Thinking about a data generating process as single shot ocurrences isn’t a good way to frame problems. A better way would be to ask, “What would happen if we did this thing a bunch of times”. When attempting to effectively evaluate hypotheses, thinking about the distribution of events is often more helpful than looking at single occurrences. You don’t hear about clinical trials with 1 patient or a brake pad company testing on 1 car. We want the largest sample possible because it gives us the clearest picture of the population and reduces variability.&lt;/p&gt;
&lt;p&gt;  Go out to a restaurant and have a bad experience? Well, I’ve only been there once so maybe it was just an off night. Take a new route home from work? Wow that was quick! But wait, I’m not taking into account the time of day or day of the week.&lt;/p&gt;
&lt;p&gt;  I can’t help but be reminded of these scenes from Silicon Valley (NSFW language).&lt;/p&gt;
&lt;iframe width=&#34;300&#34; height=&#34;300&#34; src=&#34;https://www.youtube.com/embed/OaFTpWYCzUk&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;
&lt;/iframe&gt;
&lt;iframe width=&#34;300&#34; height=&#34;300&#34; src=&#34;https://www.youtube.com/embed/VmOd27UwTsg&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;
&lt;/iframe&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>HUGO_VERSION problems</title>
      <link>/post/hugo-version-problems/</link>
      <pubDate>Sat, 07 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/hugo-version-problems/</guid>
      <description>


&lt;p&gt;In order to build this site, I use blogdown and then I deploy it with Netlify. The nice thing about netlify is that I can have the site as a repo on GitHub, and every time I push changes, the site will update. However, the other day one of my site builds kept failing. This was due to the Hugo version being different on my local machine than the one that is on Netlify.&lt;/p&gt;
&lt;p&gt;Luckily, and probably for the first time in my entire life, I found the answer in the first place I looked! If you are ever getting an error with &lt;a href=&#34;https://docs.netlify.com/configure-builds/common-configurations/#hugo&#34;&gt;exit code: 255&lt;/a&gt;, set the HUGO_VERSION environment variable (on Netlify) to the Hugo version you have installed locally. It’s pretty easy to check, in Rstudio just:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::hugo_version()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This should output a string (mine was ‘0.60.1’) and that string should be the environment variable. More info on setting the evironment variable &lt;a href=&#34;https://docs.netlify.com/configure-builds/environment-variables/#netlify-configuration-variables&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A handy use of decorators in python</title>
      <link>/post/a-handy-use-of-decorators-in-python/</link>
      <pubDate>Wed, 04 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/a-handy-use-of-decorators-in-python/</guid>
      <description>&lt;p&gt;&amp;emsp; Lets say I have the following function, and for some weird reason I want it to be called twice every time I call it.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def foo():
  print(&#39;hello&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;emsp; I could solve this in a couple of different ways.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def foo():
  print(&#39;hello&#39;)
  print(&#39;hello&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;def foo()
  print(&#39;hello&#39;)
  
foo()
foo()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;emsp; So&amp;hellip;the first way is bad because if I want to extend this functionality to other funtions, I would have to copy and paste the code everywhere. Also, to switch it on and off would be a mess. The second way is even clunkier.&lt;/p&gt;

&lt;p&gt;&amp;emsp; This is where decorators come in handy. I can write a function, that takes in a function as an argument, and then modify that function. Here&amp;rsquo;s what it looks like:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def doTwice(function):
  def wrapper(*args, **args):
    function()
    function()
    
  return wrapper
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;emsp; Let&amp;rsquo;s break down what&amp;rsquo;s going on here.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;The &lt;code&gt;doTwice&lt;/code&gt; function first takes in another function as an argument.&lt;/li&gt;
&lt;li&gt;There is a function inside of it, called &lt;code&gt;wrapper&lt;/code&gt;, that simply calls &lt;code&gt;function&lt;/code&gt; twice.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;doTwice&lt;/code&gt; returns &lt;code&gt;wrapper&lt;/code&gt;, which is actually a function.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&amp;emsp; Now that we have the &lt;code&gt;doTwice&lt;/code&gt; function, we&amp;rsquo;ll need to use it to &amp;ldquo;decorate&amp;rdquo; the &lt;code&gt;foo&lt;/code&gt; function. The syntax in python is simple.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@doTwice
def foo():
  print(&#39;hello&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;emsp; Now, every time I call &lt;code&gt;foo&lt;/code&gt;, &amp;lsquo;hello&amp;rsquo; will be printed twice, mission accomplished. The beauty of this solution is that I can now use &lt;code&gt;doTwice&lt;/code&gt; on as many functions as I&amp;rsquo;d like. I would simply add &lt;code&gt;@doTwice&lt;/code&gt; above each function definition.&lt;/p&gt;

&lt;p&gt;&amp;emsp; There are tons more helpful things you can do with decorators, and I think in the future I&amp;rsquo;ll write some more posts about them. Thanks for reading!&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: The @ syntax isn&amp;rsquo;t the only way to decorate functions, the python documentation lays out another way that requires a bit more explaining.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Custom logging in python</title>
      <link>/post/custom-logging/</link>
      <pubDate>Sun, 01 Sep 2019 00:00:00 +0000</pubDate>
      <guid>/post/custom-logging/</guid>
      <description>

&lt;p&gt;&amp;emsp; When working with data, there are a lot of things I need to keep track of in my head.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;How many observations do I have in total?&lt;/li&gt;
&lt;li&gt;I just filtered some out, how many did I throw out?&lt;/li&gt;
&lt;li&gt;Am I aggregating before or after I filter?&lt;/li&gt;
&lt;li&gt;Where should I add this chunk of code?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp; In order to keep track of these questions when working in a jupyter notebook I end up having &lt;em&gt;tons&lt;/em&gt; of cells that look like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df.shape
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;emsp; By using decorators and the &lt;code&gt;.pipe&lt;/code&gt; method I can develop an analysis path that will give me customized output and automate this tedious cycle of &lt;code&gt;.head()&lt;/code&gt; and &lt;code&gt;.shape&lt;/code&gt;. Let&amp;rsquo;s take a look.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import pandas as pd
import numpy as np
import functools

np.random.seed(5)
df = pd.DataFrame({
    &#39;group&#39;:np.random.choice([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], 10),
    &#39;x&#39;:np.random.randint(0, 10, 10),
    &#39;y&#39;:np.random.normal(0, 10, 10)
}); df.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
      &lt;th&gt;y&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;9.118736&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td&gt;-14.438416&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;18.244402&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;14.576251&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td&gt;-9.102582&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;h3 id=&#34;now-i-ll-define-some-processing-functions&#34;&gt;Now I&amp;rsquo;ll define some processing functions.&lt;/h3&gt;

&lt;p&gt;&amp;emsp; These functions all take the dataframe as an argument and pass the dataframe back. A few notes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;pDoc&lt;/code&gt; decorator is what allows me to print out the docstring and the shapes of the df at each step of the process.&lt;/li&gt;

&lt;li&gt;&lt;p&gt;The &lt;code&gt;startPipe&lt;/code&gt; function may seem useless, but I&amp;rsquo;m just using it the get the size of the dataframe at the beginning of the analysis path.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def pDoc(func):
&amp;quot;&amp;quot;&amp;quot;Print the docstring of a function.&amp;quot;&amp;quot;&amp;quot;
@functools.wraps(func)
def wrapper(*args, **kwargs):
    rv = func(*args, **kwargs)
    print(&amp;quot;{}(): \n\t{} -&amp;gt; {}&amp;quot;.format(func.__name__, func.__doc__, rv.shape))
    return rv
return wrapper

@pDoc
def startPipe(df):
&amp;quot;&amp;quot;&amp;quot;Begin pipeline&amp;quot;&amp;quot;&amp;quot;
return df

@pDoc
def filterGroups(df):
&amp;quot;&amp;quot;&amp;quot;Remove group b from the analysis.&amp;quot;&amp;quot;&amp;quot;
return df.query(&#39;group != &amp;quot;b&amp;quot;&#39;)

@pDoc
def capVal(df):
&amp;quot;&amp;quot;&amp;quot;Cap the value of y at 10.&amp;quot;&amp;quot;&amp;quot;
dat = df.copy()
dat[&#39;y&#39;] = dat[&#39;y&#39;].apply(lambda x: 10 if x &amp;gt; 10 else x)
return dat

@pDoc
def getMean(df):
&amp;quot;&amp;quot;&amp;quot;Add column as mean value of x by group.&amp;quot;&amp;quot;&amp;quot;
dat = df.copy()
dat[&#39;g_mean&#39;] = dat.groupby(&#39;group&#39;)[&#39;x&#39;].transform(np.mean)
return dat
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp; Now I&amp;rsquo;ll tie all these functions together using &lt;code&gt;.pipe&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;(df
    .pipe(startPipe)
    .pipe(filterGroups)
    .pipe(getMean)
    .pipe(capVal)).head()
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;startPipe(): 
    Begin pipeline -&amp;gt; (10, 3)
filterGroups(): 
    Remove group b from the analysis. -&amp;gt; (8, 3)
getMean(): 
    Add column as mean value of x by group. -&amp;gt; (8, 4)
capVal(): 
    Cap the value of y at 10. -&amp;gt; (8, 4)
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
      &lt;th&gt;y&lt;/th&gt;
      &lt;th&gt;g_mean&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;9.118736&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;10.000000&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;10.000000&lt;/td&gt;
      &lt;td&gt;3.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td&gt;-9.102582&lt;/td&gt;
      &lt;td&gt;3.5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;-8.175481&lt;/td&gt;
      &lt;td&gt;3.5&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&amp;emsp; As you can see, I get a really nice log output that shows the function name, docstring, and the shape of its output. I like this solution because it automates the really tedious process of having to ask myself &amp;ldquo;how many records did I just throw out&amp;rdquo;. By using decorators, the function will always show me the shape of the output.&lt;/p&gt;

&lt;p&gt;&amp;emsp; Also, this solution can be really easily extended / modified. Don&amp;rsquo;t like what my &lt;code&gt;pDoc&lt;/code&gt; decorator is doing? It&amp;rsquo;s really easy to change and customize. You&amp;rsquo;re really only limited by your imagination (and python).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Effective .transform in python</title>
      <link>/post/transform/</link>
      <pubDate>Sun, 01 Sep 2019 00:00:00 +0000</pubDate>
      <guid>/post/transform/</guid>
      <description>

&lt;p&gt;Merging summary statistics back into a table is quite a common thing to do. At first glance, a solution to this problem is to simply compute the statistics in a new table and merge the table back in. However, with &lt;code&gt;pandas&lt;/code&gt; we don&amp;rsquo;t have to do that.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import pandas as pd
import numpy as np

np.random.seed(124)
df = pd.DataFrame({
    &#39;group&#39;:np.random.choice([&#39;a&#39;, &#39;b&#39;], 5),
    &#39;x&#39;:np.random.randint(100, 200, 5)
}).sort_values(by=&#39;group&#39;); df
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;141&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;164&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;178&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;120&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;128&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;Here I&amp;rsquo;ve got some rows that having a grouping column called &lt;code&gt;group&lt;/code&gt;, and I&amp;rsquo;d like to calculate the sum of &lt;code&gt;x&lt;/code&gt; within each group and integrate it into my table.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;df[&#39;g_sum&#39;] = df.groupby(&#39;group&#39;)[&#39;x&#39;].transform(np.sum); df
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
      &lt;th&gt;g_sum&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;141&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;164&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;178&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;120&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;128&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;A key idea is that &lt;code&gt;.transform&lt;/code&gt; will apply its function argument to the dataframe and &lt;strong&gt;return a result that is the same size as the input frame.&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&#34;we-can-also-use-transform-with-a-user-defined-function&#34;&gt;We can also use &lt;code&gt;.transform&lt;/code&gt; with a user defined function&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def max_minus_one(col):
    &amp;quot;&amp;quot;&amp;quot; Get the max - 1 of a list&amp;quot;&amp;quot;&amp;quot;
    return np.max(col) - 1

df[&#39;udf&#39;] = df.groupby(&#39;group&#39;)[&#39;x&#39;].transform(max_minus_one); df
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
      &lt;th&gt;g_sum&lt;/th&gt;
      &lt;th&gt;udf&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;141&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;164&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;178&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;120&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;128&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;h3 id=&#34;and-even-lambda-functions&#34;&gt;&amp;hellip;and even lambda functions&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;df[&#39;use_lam&#39;] = df.groupby(&#39;group&#39;)[&#39;x&#39;].transform(lambda x: np.max(x) - 1); df
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;group&lt;/th&gt;
      &lt;th&gt;x&lt;/th&gt;
      &lt;th&gt;g_sum&lt;/th&gt;
      &lt;th&gt;udf&lt;/th&gt;
      &lt;th&gt;use_lam&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;141&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;164&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;178&lt;/td&gt;
      &lt;td&gt;483&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;120&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;128&lt;/td&gt;
      &lt;td&gt;248&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
      &lt;td&gt;127&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
